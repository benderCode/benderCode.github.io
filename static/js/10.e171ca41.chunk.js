(this["webpackJsonpframe-web"]=this["webpackJsonpframe-web"]||[]).push([[10],{187:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return I}));var s=a(37),n=a(38),i=a(40),c=a(39),o=a(41),r=a(0),l=a.n(r),p=a(170),m=a(174),d=a(179),u=(a(187),a(171)),f=a(168),y=a(169),h=a(167),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={IP:"",simplifyInfo:{},payInfo:{},isLoading:!1},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){if(this.props.match.params){var e=JSON.parse(this.props.match.params.data);this.setState({simplifyInfo:e})}this.setState({IP:window.returnCitySN.cip})}},{key:"componentDidMount",value:function(){this.getHtDeductibleInfoList(this.state.simplifyInfo.workOrderId)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container pay"},l.a.createElement(p.a,{title:"\u81ea\u4ed8\u6b3e",leftClick:function(){e.props.history.goBack()}}),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"payInfoContent"},l.a.createElement("div",{className:"rowBox"},l.a.createElement("p",{className:"title"},"\u5de5\u5355\u53f7\uff1a"),l.a.createElement("p",{className:"value"},this.state.simplifyInfo.workOrderId)),l.a.createElement("div",{className:"rowBox"},l.a.createElement("p",{className:"title"},"\u4ea7\u54c1\u540d\u79f0\uff1a"),l.a.createElement("p",{className:"value"},this.state.simplifyInfo.productName)),l.a.createElement("div",{className:"rowBox"},l.a.createElement("p",{className:"title"},"\u6295\u4fdd\u8bbe\u5907\uff1a"),l.a.createElement("p",{className:"value"},this.state.simplifyInfo.insured)),l.a.createElement("div",{className:"rowBox"},l.a.createElement("p",{className:"title"},"\u6709\u6548\u671f\uff1a"),l.a.createElement("p",{className:"value"},this.state.simplifyInfo.validity))),l.a.createElement("div",{className:"payPicContent"},l.a.createElement("p",{className:"picTitle"},"\u81ea\u4ed8\u6b3e\uff1a"),l.a.createElement("p",{className:"picText"},l.a.createElement("span",{className:"currency"},"\uffe5"),l.a.createElement("span",{className:"num"},this.state.payInfo.deductiblesLimit&&y.b(this.state.payInfo.deductiblesLimit/100))))),l.a.createElement(m.a,{text:"\u7acb\u5373\u652f\u4ed8",click:function(){e.wxPayOrder()}}),this.state.isLoading?l.a.createElement(d.a,{text:"\u52a0\u8f7d\u4e2d..."}):null)}},{key:"getHtDeductibleInfoList",value:function(e){var t=this;Object(u.a)(f.b.getHtDeductibleInfoList+"?formId=".concat(e)).then((function(e){"SUCCESS"===e.status?t.setState({payInfo:e.data}):(t.setState({payInfo:{}}),h.a.error("\u83b7\u53d6\u4e0b\u5355\u4fe1\u606f\u5931\u8d25"))})).catch((function(e){console.log(e)}))}},{key:"wxPayOrder",value:function(){var e=this;this.setState({isLoading:!0});var t=this;Object(u.b)(f.b.wxPayOrder,{formId:this.state.simplifyInfo.workOrderId,openid:y.c("userInfo").openId,outTradeNo:this.state.payInfo.id,spbillCreateIp:this.state.IP,totalFee:this.state.payInfo.deductiblesLimit}).then((function(a){"SUCCESS"===a.status?(e.setState(),window.wx.config({debug:!1,appId:a.data.appId,timestamp:a.data.timeStamp,nonceStr:a.data.nonceStr,signature:"MD5",jsApiList:["chooseWXPay"]}),window.wx.ready((function(e){window.wx.chooseWXPay({timestamp:a.data.timeStamp,nonceStr:a.data.nonceStr,package:a.data.package,signType:a.data.signType,paySign:a.data.paySign,success:function(e){"chooseWXPay:ok"==e.errMsg?t.props.history.push("/paySuccess"):"chooseWXPay:cancel"==e.errMsg?(h.a.error("\u7528\u6237\u5df2\u53d6\u6d88",2),t.props.history.push("/payFailed")):(e.errMsg,h.a.error("\u652f\u4ed8\u5931\u8d25",2),t.props.history.push("/payFailed"))}})}))):e.props.history.push("/payFailed")})).catch((function(e){console.log(e)})).finally((function(){e.setState({isLoading:!1})}))}}]),t}(l.a.Component);I.defaultProps={}}}]);
//# sourceMappingURL=10.e171ca41.chunk.js.map